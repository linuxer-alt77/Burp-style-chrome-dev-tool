<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>rep+ HTTP Request Repeater</title>
    <link rel="stylesheet" href="css/panel.css" />
    <link rel="stylesheet" href="css/split-pane.css" />
    <link rel="stylesheet" href="css/request-list.css" />
  </head>
  <body>
    <!-- Main Container -->
    <div id="app" class="app-container">
      <!-- Toolbar -->
      <div class="toolbar">
        <div class="toolbar-left">
          <!-- Capture button removed, always capturing -->
          <button id="btn-clear" class="btn btn-secondary" title="Clear All Requests (Ctrl+L)">
            <span class="icon">üóë</span> Clear
          </button>
          <span class="toolbar-divider"></span>
          <button id="btn-layout" class="btn btn-icon" title="Toggle Layout">
            <span class="icon">‚™≤</span>
          </button>
          <span class="toolbar-divider"></span>
          <span id="status-indicator" class="status-indicator">
            <span class="status-dot"></span>
            <span class="status-text">Ready</span>
          </span>
        </div>
        <div class="toolbar-right">
          <span id="request-counter" class="request-counter">0 requests</span>
          <button id="btn-settings" class="btn btn-icon" title="Settings">
            <span class="icon">‚öô</span>
          </button>
          <button id="btn-theme" class="btn btn-icon" title="Toggle Theme (Ctrl+T)">
            <span class="icon">üåì</span>
          </button>
        </div>
      </div>

      <!-- Split Pane Container -->
      <div class="split-pane-container">
        <!-- Left Panel: Request List -->
        <div class="split-pane left-pane" data-min-width="200">
          <div class="panel-header">
            <h3>Captured Requests</h3>
            <span id="domain-count" class="badge">0 domains</span>
          </div>

          <div class="panel-toolbar">
            <input
              type="text"
              id="search-requests"
              placeholder="Filter by URL, method..."
              class="search-input"
            />
            <select id="filter-method" class="filter-select">
                <option value="">All Methods</option>
                <option value="GET">GET</option>
                <option value="POST">POST</option>
                <option value="PUT">PUT</option>
                <option value="DELETE">DELETE</option>
            </select>
          </div>

          <div class="panel-body">
            <div id="request-list" class="request-list">
              <!-- Empty state -->
              <div class="empty-state" id="empty-state-requests">
                <div class="empty-icon">üì°</div>
                <p class="empty-title">No requests captured yet</p>
                <p class="empty-hint">Click "Capture" to start monitoring network traffic</p>
              </div>

              <!-- Request groups will be dynamically added here -->
              <!-- Structure:
                <div class="domain-group">
                  <div class="domain-header">
                    <span class="expand-icon">‚ñº</span>
                    <span class="domain-name">api.example.com</span>
                    <span class="domain-count">5</span>
                  </div>
                  <div class="domain-requests">
                    <div class="request-item">...</div>
                  </div>
                </div>
              -->
            </div>
          </div>
        </div>

        <!-- Resizer -->
        <div class="resizer" data-direction="horizontal"></div>

        <!-- Center Panel: Request Editor -->
        <div class="split-pane center-pane" data-min-width="300">
          <div class="panel-header">
            <h3>Request Editor</h3>
            <div class="editor-actions">
              <button id="btn-send" class="btn btn-success" title="Send Request (Ctrl+Enter)">
                <span class="icon">‚ñ∂</span> Send
              </button>
              <button
                id="btn-duplicate"
                class="btn btn-secondary"
                title="Duplicate Request (Ctrl+D)"
              >
                <span class="icon">üìã</span>
              </button>
              <button id="btn-save" class="btn btn-secondary" title="Save Request">
                <span class="icon">üíæ</span>
              </button>
            </div>
          </div>

          <div class="panel-body">
            <div id="request-editor" class="request-editor">
              <!-- Request URL Bar -->
              <div class="request-url-bar">
                <select id="request-method" class="method-select">
                  <option value="GET">GET</option>
                  <option value="POST">POST</option>
                  <option value="PUT">PUT</option>
                  <option value="DELETE">DELETE</option>
                  <option value="PATCH">PATCH</option>
                  <option value="HEAD">HEAD</option>
                  <option value="OPTIONS">OPTIONS</option>
                </select>
                <input
                  type="text"
                  id="request-url"
                  class="url-input"
                  placeholder="https://api.example.com/endpoint"
                />
              </div>

              <!-- Tabs for different views -->
              <div class="tabs">
                <button class="tab active" data-tab="raw">Raw</button>
                <button class="tab" data-tab="headers">Headers</button>
                <button class="tab" data-tab="params">Params</button>
                <button class="tab" data-tab="body">Body</button>
              </div>

              <!-- Tab content -->
              <div class="tab-content">
                <div id="tab-raw" class="tab-pane active">
                  <textarea
                    id="raw-request"
                    class="code-editor"
                    placeholder='Paste or edit raw HTTP request...&#10;&#10;POST /api/users HTTP/1.1&#10;Host: api.example.com&#10;Content-Type: application/json&#10;&#10;{&#10;  "name": "John Doe"&#10;}'
                    spellcheck="false"
                  ></textarea>
                </div>

                <div id="tab-headers" class="tab-pane">
                  <div class="key-value-container">
                    <div id="headers-editor" class="key-value-editor">
                      <!-- Dynamic headers will be added here -->
                    </div>
                    <button class="btn-add-row" id="add-header">
                      <span class="icon">+</span> Add Header
                    </button>
                  </div>
                </div>

                <div id="tab-params" class="tab-pane">
                  <div class="key-value-container">
                    <div id="params-editor" class="key-value-editor">
                      <!-- Dynamic params will be added here -->
                    </div>
                    <button class="btn-add-row" id="add-param">
                      <span class="icon">+</span> Add Parameter
                    </button>
                  </div>
                </div>

                <div id="tab-body" class="tab-pane">
                  <div class="body-editor-container">
                    <div class="body-type-selector">
                      <label>
                        <input type="radio" name="body-type" value="raw" checked /> Raw
                      </label>
                      <label> <input type="radio" name="body-type" value="json" /> JSON </label>
                      <label>
                        <input type="radio" name="body-type" value="form" /> Form Data
                      </label>
                    </div>
                    <textarea
                      id="body-editor"
                      class="code-editor"
                      placeholder="Request body..."
                      spellcheck="false"
                    ></textarea>
                  </div>
                </div>
              </div>

              <!-- Empty state -->
              <div class="empty-state" id="empty-state-editor" style="display: none">
                <div class="empty-icon">üëÜ</div>
                <p class="empty-title">No request selected</p>
                <p class="empty-hint">Select a request from the list to edit it</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Resizer -->
        <div class="resizer" data-direction="horizontal"></div>

        <!-- Right Panel: Response Viewer -->
        <div class="split-pane right-pane" data-min-width="250">
          <div class="panel-header">
            <h3>Response</h3>
            <div class="response-meta">
              <span id="response-status" class="status-badge"></span>
              <span id="response-time" class="response-time"></span>
              <span id="response-size" class="response-size"></span>
            </div>
          </div>

          <div class="panel-body">
            <div id="response-viewer" class="response-viewer">
              <!-- Tabs for response views -->
              <div class="tabs">
                <button class="tab active" data-tab="response-raw">Raw</button>
                <button class="tab" data-tab="response-headers">Headers</button>
                <button class="tab" data-tab="response-preview">Preview</button>
              </div>

              <!-- Response content -->
              <div class="tab-content">
                <div id="tab-response-raw" class="tab-pane active">
                  <pre id="response-raw" class="code-viewer"></pre>
                </div>

                <div id="tab-response-headers" class="tab-pane">
                  <div class="headers-list">
                    <div id="response-headers" class="response-headers-container"></div>
                  </div>
                </div>

                <div id="tab-response-preview" class="tab-pane">
                  <div id="response-preview" class="response-preview-container"></div>
                </div>
              </div>

              <!-- Empty state -->
              <div class="empty-state" id="empty-state-response">
                <div class="empty-icon">‚è≥</div>
                <p class="empty-title">No response yet</p>
                <p class="empty-hint">Send a request to see the response here</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Status Bar -->
      <div class="status-bar">
        <span id="status-text">Ready</span>
        <span id="selected-request-info" class="selected-info"></span>
      </div>
    </div>

    <!-- Scripts -->
    <script src="js/panel.js" type="module"></script>
  </body>
</html>
